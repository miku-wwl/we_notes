GlobalExceptionFilter.cs
``` cs
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.Filters;

namespace web.Controller;

public class GlobalExceptionFilter(ILogger<GlobalExceptionFilter> logger) : IExceptionFilter
{
    public void OnException(ExceptionContext context)
    {
        var exception = context.Exception;

        logger.LogError(exception, "控制器执行过程中发生未处理异常");

        var result = new ObjectResult(new
            {
                Code = 500,
                Message = "服务器内部错误, 请稍后重试",
                Detail = exception.Message
            }
        )
        
        {
            StatusCode = StatusCodes.Status500InternalServerError
        };

        context.Result = result;
        context.ExceptionHandled = true;
    }
}
```

TestController.cs
``` cs
using Microsoft.AspNetCore.Mvc;

namespace web.Controller;


[ApiController]
[Route("api/[controller]")]
public class TestController :ControllerBase
{
    [HttpGet("error")]
    public void GetError()
    {
        throw new Exception("Something went wrong");
    }
}
```

Program.cs
``` cs
// 添加服务
builder.Services.AddControllers(opt => { opt.Filters.Add<GlobalExceptionFilter>(); });
```

curl http://localhost:5222/api/Test/error